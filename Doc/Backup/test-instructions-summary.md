# คำแนะนำการทดสอบ MP3 to Subtitle สำหรับ Whisper Large และ Typhoon

## ภาพรวม
ได้เตรียมเครื่องมือสำหรับทดสอบการแปลงไฟล์เสียง MP3 เป็นคำบรรยาย SRT ด้วยโมเดล Whisper Large และ Typhoon ASR พร้อมระบบติดตามเวลาและการแบ่งย่อหน้าที่เหมาะสมกับภาษาไทย

## ไฟล์ที่เตรียมไว้

### 1. เอกสารประกอบ
- `README.md` - คู่มือการใช้งานที่อ่านง่าย (อัปเดตแล้ว)
- `Doc/test-plan-mp3-to-subtitle.md` - แผนการทดสอบโดยละเอียด
- `Doc/test-implementation-guide.md` - คู่มือการ implement โค้ด
- `Doc/test-workflow-diagram.md` - ไดอะแกรมแสดงขั้นตอนการทำงาน
- `Doc/test-script-complete.md` - โค้ดเต็มของสคริปต์ทดสอบ
- `Doc/test-batch-file.md` - คำสั่ง batch file สำหรับรันทดสอบ

### 2. สิ่งที่ต้องสร้าง
1. **test_mp3_to_subtitle.py** - สคริปต์ทดสอบ (คัดลอกจาก Doc/test-script-complete.md)
2. **test_models.bat** - ไฟล์ batch สำหรับรันง่ายๆ (คัดลอกจาก Doc/test-batch-file.md)

## ขั้นตอนการทดสอบ

### วิธีที่ 1: ใช้ Batch File (แนะนำ)
1. สร้างไฟล์ `test_models.bat` จากเนื้อหาใน Doc/test-batch-file.md
2. สร้างไฟล์ `test_mp3_to_subtitle.py` จากเนื้อหาใน Doc/test-script-complete.md
3. ดับเบิลคลิก `test_models.bat`
4. รอจนกเสร็จ แล้วตรวจสอบผลลัพธ์

### วิธีที่ 2: รันด้วย Command Line
1. เปิด Command Prompt ในโฟลเดอร์ SRT-Generator
2. Activate environment:
   ```
   srt_env\Scripts\activate
   ```
3. รันสคริปต์:
   ```
   python test_mp3_to_subtitle.py
   ```
4. Deactivate:
   ```
   deactivate
   ```

## ไฟล์ที่จะถูกสร้าง

### ไฟล์ SRT Output
- `output/Jasmali.whisper.large.001.srt`
- `output/Jasmali.typhoon.001.srt`
- `output/ขนมครก.whisper.large.001.srt`
- `output/ขนมครก.typhoon.001.srt`

### ไฟล์รายงาน
- `test_report.json` - รายงานผลการทดสอบโดยละเอียด

## การตั้งชื่อไฟล์
ระบบจะจัดการ Running Number อัตโนมัติ:
- รูปแบบ: `{ชื่อไฟล์เสียง}.{โมเดล}.{เลขที่}.srt`
- ตัวอย่าง: `Jasmali.whisper.large.001.srt`
- หากทดสอบซ้ำจะเป็น `Jasmali.whisper.large.002.srt` ตามลำดับ

## การประเมินคุณภาพ

สคริปต์จะประเมินคุณภาพของคำบรรยาย:
1. **ความถูกต้องของเวลา** - ตรวจสอบ timestamps
2. **ความเหมาะสมของระยะเวลา** - 2-7 วินาทีต่อ segment
3. **จำนวนตัวอักษร** - ไม่เกิน 42 ตัวอักษร (บรรทัดเดียว) หรือ 84 (สองบรรทัด)
4. **การแบ่งย่อหน้าภาษาไทย** - ตรวจสอบการตัดคำที่เหมาะสม

## ข้อควรตรวจสอบหลังทดสอบ

1. **ตรวจสอบไฟล์ SRT**:
   - เปิดดูว่า timestamps ตรงกับเสียงพูดหรือไม่
   - ข้อความภาษาไทยแสดงผลถูกต้องหรือไม่
   - ระยะเวลาแสดงคำบรรยายเหมาะสมหรือไม่

2. **ตรวจสอบรายงาน**:
   - เปิด `test_report.json`
   - เปรียบเทียบประสิทธิภาพระหว่างโมเดล
   - ดูคะแนนความเป็นธรรมชาติของคำบรรยาย

3. **การเปรียบเทียบโมเดล**:
   - Whisper: ดีสำหรับเสียงหลายภาษา หรือมีคำศัพท์เฉพาะทาง
   - Typhoon: ดีเยี่ยมสำหรับเสียงไทยล้วน ความแม่นยำสูง

## ปัญหาที่อาจพบ

1. **GPU ไม่ทำงาน**: จะใช้ CPU แทน (ช้ากว่า)
2. **ไฟล์เสียงไม่มีคำพูด**: จะสร้าง placeholder segments
3. **Encoding ภาษาไทย**: ไฟล์ทั้งหมดใช้ UTF-8
4. **ชื่อไฟล์ซ้ำ**: ระบบจะเพิ่ม running number อัตโนมัติ

## ถัดไป

หลังจากทดสอบเสร็จแล้ว:
1. ตรวจสอบคุณภาพของคำบรรยาย
2. เลือกโมเดลที่เหมาะสมกับการใช้งาน
3. สามารถปรับแต่งพารามิเตอร์เพิ่มเติมได้ตามความต้องการ